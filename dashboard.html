<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Destinasiku - Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 220px;
      background: #6a11cb;
      color: white;
      padding: 20px;
    }
    .sidebar a {
      display: block;
      padding: 10px;
      color: white;
      text-decoration: none;
      border-radius: 8px;
    }
    .sidebar a:hover {
      background: rgba(255,255,255,0.2);
    }
    .content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
  </style>
</head>


 
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h4>Destinasiku</h4>
    <a href="#">Dashboard</a>
    <a href="#input">Input Data</a>
    <a href="#list">Data Wisata</a>
  </div>

  <div class="sidebar">
  <h4>Destinasiku</h4>
  <a href="#">Dashboard</a>
  <a href="#input">Input Data</a>
  <a href="#list">Data Wisata</a>
  <hr>
  <button id="logoutBtn" class="btn btn-light w-100">Logout</button>
</div>


  <!-- Main Content -->
  <div class="content">
    <h3>Dashboard Admin</h3>
    <div class="row mt-4">
  <div class="col-md-4">
    <div class="card text-center">
      <div class="card-body">
        <h5>Total Wisata</h5>
        <h3 id="totalWisata">0</h3>
      </div>
    </div>
  </div>
  
  <div class="col-md-4">
    <div class="card text-center">
      <div class="card-body">
        <h5>Kabupaten/Kota</h5>
        <h3 id="totalKabupaten">0</h3>
      </div>
    </div>
  </div>
</div>


    <hr id="input">

    <!-- Search -->
<div class="mb-3">
  <input type="text" id="searchInput" class="form-control" placeholder="Cari wisata...">
</div>


    <!-- Form Input Data -->
<h4>Input Data Wisata</h4>
<form id="formWisata">
  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">Nama Wisata</label>
      <input type="text" class="form-control" id="namaWisata" required>
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label">Jenis Daya Tarik</label>
      <input type="text" class="form-control" id="jenisDayaTarik" required>
    </div>
    <div class="col-md-12 mb-3">
      <label class="form-label">Deskripsi</label>
      <textarea class="form-control" id="deskripsi" required></textarea>
    </div>

    <div class="col-md-12 mb-3">
  <label class="form-label">Upload Gambar</label>
  <input type="file" class="form-control" id="gambar" accept="image/*">
</div>


    <div class="col-md-6 mb-3">
      <label class="form-label">Alamat</label>
      <input type="text" class="form-control" id="alamat" required>
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label">Kabupaten/Kota</label>
      <input type="text" class="form-control" id="kabupaten" required>
    </div>
  </div>
  <button type="submit" class="btn btn-success">Simpan</button>
</form>

<hr id="list">

<!-- Tabel Data -->
<h4 class="mt-4">Data Wisata</h4>
<table class="table table-bordered mt-3" id="tabelWisata">
  <thead>
  <tr>
    <th>Nama Wisata</th>
    <th>Jenis Daya Tarik</th>
    <th>Kabupaten</th>
    <th>Alamat</th>
    <th>Deskripsi</th> <!-- Tambahan -->
    <th>Foto</th>

    <th>Aksi</th>
  </tr>
</thead>

  <tbody>
    <tr>
  <td>Contoh Wisata</td>
  <td>Pantai</td>
  <td>Contoh Kabupaten</td>
  <td>Contoh Alamat</td>
  
  <td>Contoh Deskripsi</td>
  <td><img src="https://via.placeholder.com/80" width="80"></td>

  <td>
    <button type="button" class="btn btn-warning btn-sm edit">Edit</button>
    <button type="button" class="btn btn-danger btn-sm delete">Hapus</button>
  </td>
</tr>

  </tbody>
</table>

<!-- Pagination -->
<nav>
  <ul class="pagination justify-content-center" id="pagination"></ul>
</nav>


  
<script>

  const form = document.getElementById("formWisata");
  const tabel = document.querySelector("#tabelWisata tbody");

  let currentPage = 1;
const rowsPerPage = 5; // jumlah data per halaman


function displayTablePage(page) {
  const rows = tabel.querySelectorAll("tr");
  const totalRows = rows.length;

  const start = (page - 1) * rowsPerPage;
  const end = start + rowsPerPage;

  rows.forEach((row, index) => {
    row.style.display = (index >= start && index < end) ? "" : "none";
  });

  displayPagination(totalRows, page);
}

function displayPagination(totalRows, page) {
  const pageCount = Math.ceil(totalRows / rowsPerPage);
  const pagination = document.getElementById("pagination");

  pagination.innerHTML = "";

  for (let i = 1; i <= pageCount; i++) {
    const li = document.createElement("li");
    li.className = `page-item ${i === page ? "active" : ""}`;
    li.innerHTML = `<a class="page-link" href="#">${i}</a>`;
    li.addEventListener("click", function (e) {
      e.preventDefault();
      currentPage = i;
      displayTablePage(currentPage);
    });
    pagination.appendChild(li);
  }
}

  

form.addEventListener("submit", function(e){
  e.preventDefault();

    // ambil data dari form
    let nama = document.getElementById("namaWisata").value;
let jenis = document.getElementById("jenisDayaTarik").value;
let kabupaten = document.getElementById("kabupaten").value;
let alamat = document.getElementById("alamat").value;
let deskripsi = document.getElementById("deskripsi").value;
const gambarInput = document.getElementById("gambar");


// ambil gambar
  let gambarUrl = "";
  if (gambarInput.files.length > 0) {
    gambarUrl = URL.createObjectURL(gambarInput.files[0]);
  } else {
    gambarUrl = "https://via.placeholder.com/80"; 
  }


    // buat baris baru di tabel
    const row = document.createElement("tr");
  row.innerHTML = `
    <td>${nama}</td>
    <td>${jenis}</td>
    <td>${kabupaten}</td>
    <td>${alamat}</td>
    <td>${deskripsi}</td>
    <td><img src="${gambarUrl}" width="80"></td>
    <td>
      <button class="btn btn-warning btn-sm edit">Edit</button>
      <button class="btn btn-danger btn-sm delete">Hapus</button>
    </td>
  `;
  
tabel.appendChild(row);
  displayTablePage(currentPage); // biar tetap sesuai pagination
  updateStatistik();
  form.reset();
});

  // ðŸ”¹ event delegation untuk tombol Edit & Hapus
  tabel.addEventListener("click", function(e) {
    if (e.target.classList.contains("delete")) {
      // hapus baris
      e.target.parentElement.parentElement.remove();
       // ðŸ”¹ panggil update statistik
  updateStatistik();
    }

    

    if (e.target.classList.contains("edit")) {
      // ambil baris
      const row = e.target.parentElement.parentElement;
const nama = row.children[0].textContent;
const jenis = row.children[1].textContent;
const kabupaten = row.children[2].textContent;
const alamat = row.children[3].textContent;
const deskripsi = row.children[4].textContent;


      // isi form dengan data lama
      document.getElementById("namaWisata").value = nama;
document.getElementById("jenisDayaTarik").value = jenis;
document.getElementById("kabupaten").value = kabupaten;
document.getElementById("alamat").value = alamat;
document.getElementById("deskripsi").value = deskripsi;


      // hapus baris lama (akan diganti setelah submit lagi)
      row.remove();
      // ðŸ”¹ panggil update statistik
  updateStatistik();
    }
  });

  function updateStatistik() {
  const rows = document.querySelectorAll("table tbody tr");
  const totalWisata = rows.length;

  // Hitung unique jenis daya tarik
  const jenisSet = new Set();
  const kabupatenSet = new Set();

  rows.forEach(row => {
    const cells = row.querySelectorAll("td");
    const jenis = cells[1]?.innerText;   // posisi kolom Jenis
    const kabupaten = cells[2]?.innerText; // posisi kolom Kabupaten

    if (jenis) jenisSet.add(jenis);
    if (kabupaten) kabupatenSet.add(kabupaten);
  });

  document.getElementById("totalWisata").innerText = totalWisata;
  
  document.getElementById("totalKabupaten").innerText = kabupatenSet.size;
}
// ðŸ”Ž fitur pencarian
document.getElementById("searchInput").addEventListener("keyup", function() {
  let keyword = this.value.toLowerCase();
  let rows = tabel.getElementsByTagName("tr");

  for (let i = 0; i < rows.length; i++) {
    let rowText = rows[i].textContent.toLowerCase();
    rows[i].style.display = rowText.includes(keyword) ? "" : "none";
  }
});

// ðŸ”Ž Fungsi Search
const searchInput = document.getElementById("searchInput");

searchInput.addEventListener("input", function () {
  const keyword = this.value.toLowerCase();
  const rows = tabel.getElementsByTagName("tr");

  for (let i = 0; i < rows.length; i++) {
    const cells = rows[i].getElementsByTagName("td");
    let match = false;

    for (let j = 0; j < cells.length - 1; j++) { // kecuali kolom Aksi
      if (cells[j].textContent.toLowerCase().includes(keyword)) {
        match = true;
        break;
      }
    }

    rows[i].style.display = match ? "" : "none";
  }
});






</script> 
<script>
  document.getElementById("logoutBtn").addEventListener("click", function(){
    // kalo klik logout, balik ke index.html
    window.location.href = "index.html";
  });
</script>

</body>


</html>